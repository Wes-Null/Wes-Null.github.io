"0","# Replace with location of 'Spotify_Top_Songs_Global_5-29-25' on your local machine ###"
"0",""
"0","file_path <- ""data/Spotify_Top_Songs_Global_May_29_2025 (2).csv"""
"0",""
"0","Spotify_df <- read_csv(file_path)"
"0",""
"0","## For each song, count the number of countries it appears in"
"0","## We'll use the unique combination of track_name and artists_name"
"0",""
"0","n_countries <- Spotify_df |>"
"0","  group_by(track_name, artist_names) |>"
"0","  summarize(n_countries = n_distinct(country), .groups = 'drop') |>"
"0","  mutate(n_countries = n_countries - 1)"
"0",""
"0","## Join summarized output with original dataframe"
"0",""
"0","Spotify_df2 <- Spotify_df |>"
"0","  left_join(n_countries, by = c(""track_name"", ""artist_names""))"
"0",""
"0","## Add the individual song totals together for each country for N Shares"
"0","## Average the shares per song for Globality"
"0",""
"0","country_uniqueness <- Spotify_df2 |>"
"0","  group_by(country) |>"
"0","  summarize(Globality = mean(n_countries, na.rm = TRUE),"
"0","            `N Shares` = sum(n_countries, na.rm = TRUE)) |>"
"0","  arrange(country) |>"
"0","  rename(Country = country)"
"0",""
"0","glob_table <- datatable("
"0","  country_uniqueness,"
"0","  rownames = FALSE,"
"0","  class = 'compact stripe',"
"0","  filter = 'top', "
"0","  options = list("
"0","    scrollY = '500px',"
"0","    pageLength = 73,"
"0","    dom = 'ftip'      "
"0","  )"
"0",")"
"0",""
"0","glob_table"
